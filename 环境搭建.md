# åˆ›å»ºé¡¹ç›®ç¯å¢ƒ

conda create -n lingua python=3.10 -y
conda activate lingua

# å®‰è£…ä¾èµ–

pip install -r requirements.txt

# ç›®å½•ç»“æ„

```
lingua_card_assistant/
â”œâ”€â”€ main.py                      # ä¸»æ§åˆ¶å…¥å£
â”œâ”€â”€ config.py                    # å­˜å‚¨ API Token å’Œé…ç½®é¡¹
â”œâ”€â”€ generator/
â”‚   â””â”€â”€ text_generator.py        # ä¹¦ç”Ÿæ¨¡å‹ç”Ÿæˆæ¨¡å—
â”œâ”€â”€ renderer/
â”‚   â””â”€â”€ card_renderer.py         # Jinja2 HTML æ¸²æŸ“
â”œâ”€â”€ exporter/
â”‚   â””â”€â”€ html_to_image.py         # HTML è½¬ PNGï¼ˆhtml2imageï¼‰
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ card_template.html       # å¡ç‰‡ HTML æ¨¡æ¿
â”œâ”€â”€ output/                      # å­˜æ”¾ç”Ÿæˆçš„ PNG
â”œâ”€â”€ docs/                        # é¡¹ç›®è¯´æ˜ã€è®°å½•æ–‡æ¡£
â”‚   â””â”€â”€ project_plan.md          # é¡¹ç›®å¼€å‘è®¡åˆ’
â”œâ”€â”€ requirements.txt             # Pythonä¾èµ–
â””â”€â”€ README.md                    # ç®€è¦è¯´æ˜æ–‡æ¡£
```

# LinguaCard é¡¹ç›®è¯´æ˜æ–‡æ¡£ï¼ˆç‰ˆæœ¬ V1ï¼‰

## ğŸ“Œ é¡¹ç›®ç®€ä»‹

**LinguaCard** æ˜¯ä¸€ä¸ªåŸºäºå¤§è¯­è¨€æ¨¡å‹å’Œæ–‡ç”Ÿå›¾æ¨¡å‹çš„è‹±è¯­å­¦ä¹ å¡ç‰‡ç”Ÿæˆå™¨ï¼Œæ”¯æŒè‡ªåŠ¨ç”Ÿæˆè‹±æ–‡æ®µè½ã€é‡ç‚¹è¯æ±‡ã€ä¸­æ–‡ç¿»è¯‘åŠé…å¥—æ’å›¾ï¼Œå¹¶ä»¥å¡ç‰‡æ ·å¼å¯¼å‡ºä¸º HTML å’Œ PNG å›¾ç‰‡ã€‚

æœ¬ç‰ˆæœ¬ä¸º V1ï¼Œå®ç°äº†ä»è¾“å…¥ä¸»é¢˜è¯ â†’ è‡ªåŠ¨å†…å®¹ç”Ÿæˆ â†’ æ’å›¾ç”Ÿæˆ â†’ HTML æ¸²æŸ“ â†’ å¡ç‰‡å¯¼å‡º çš„å®Œæ•´æµç¨‹ã€‚
ä¸€äº›å¡ç‰‡çš„å±•ç¤º

<h3>å¡ç‰‡å±•ç¤ºç¤ºä¾‹</h3>

<table>
  <tr>
    <td><img src="output/cars.png" width="300"/></td>
    <td><img src="output/salad_fruit.png" width="300"/></td>
  </tr>
  <tr>
    <td><img src="output/park.png" width="300"/></td>
    <td><img src="output/salad_veg.png" width="300"/></td>
  </tr>
</table>

---

## ğŸ§± é¡¹ç›®ç»“æ„

```bash
LinguaCard/
â”œâ”€â”€ main.py                       # ä¸»å…¥å£è„šæœ¬ï¼Œæ‰§è¡Œå¡ç‰‡ç”Ÿæˆæµç¨‹
â”œâ”€â”€ generator/
â”‚   â”œâ”€â”€ text_generator.py         # è°ƒç”¨ä¹¦ç”Ÿå¤§æ¨¡å‹ç”Ÿæˆå¡ç‰‡æ­£æ–‡ã€ç¿»è¯‘ã€è¯æ±‡ç­‰
â”‚   â””â”€â”€ llm_prompt_generator.py   # è°ƒç”¨ä¹¦ç”Ÿå¤§æ¨¡å‹ç”Ÿæˆæ’å›¾æç¤ºè¯ prompt
â”œâ”€â”€ image_gen/
â”‚   â””â”€â”€ local_sd_gen.py           # æœ¬åœ°éƒ¨ç½² Stable Diffusion æ¨¡å‹ç”Ÿæˆæ’å›¾
â”œâ”€â”€ renderer/
â”‚   â””â”€â”€ card_renderer.py          # Jinja2 æ¸²æŸ“ HTML å¡ç‰‡
â”œâ”€â”€ exporter/
â”‚   â””â”€â”€ html_to_image_firefox.py  # ä½¿ç”¨ Firefox æˆªå›¾ä¿å­˜ä¸º PNG
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ card_template.html        # HTML æ¨¡æ¿æ ·å¼ï¼ˆV1ï¼‰
â”œâ”€â”€ output/                       # å¡ç‰‡ç”Ÿæˆè¾“å‡ºç›®å½•ï¼ˆHTML + PNGï¼‰
â”œâ”€â”€ .env                          # ç¯å¢ƒå˜é‡ï¼ˆå­˜å‚¨ API Tokenï¼‰
â””â”€â”€ requirements.txt              # é¡¹ç›®ä¾èµ–ï¼ˆå¯é€‰ï¼‰
```

---

## ğŸš€ åŠŸèƒ½æµç¨‹

ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ä¸»è¦çš„æµç¨‹å¦‚ä¸‹ï¼š

```mermaid
flowchart LR
    A[è¾“å…¥ä¸»é¢˜è¯] --> B[è°ƒç”¨ä¹¦ç”Ÿç”Ÿæˆå¡ç‰‡å†…å®¹]
    B --> C[è°ƒç”¨ä¹¦ç”Ÿç”Ÿæˆæ’å›¾ prompt]
    C --> D[è°ƒç”¨æœ¬åœ° SD ç”Ÿæˆæ’å›¾]
    D --> E[æ¸²æŸ“ HTML å¡ç‰‡]
    E --> F[Firefox æˆªå›¾ä¸º PNG]
```

---

## ğŸ“¥ ä½¿ç”¨æ–¹æ³•

### 1.åˆ›å»ºcondaç¯å¢ƒ

è¿™é‡Œçš„ç¯å¢ƒåŒ…å«äº†æœ¬åœ°è¿è¡Œéƒ¨ç½²çš„stablediffusionæ‰€éœ€åŒ…

```bash
conda create -n lingua python=3.10 -y
conda activate lingua
git clone https://github.com/hehao678/LinguaCard.git
cd LinguaCard
pip install -r requirements.txt
```

### 2. åˆ›å»º `.env` æ–‡ä»¶

```env
API_TOKEN=ä½ çš„ä¹¦ç”ŸAPIå¯†é’¥
```

### 3.å®‰è£…å¹¶éƒ¨ç½²stablediffusion

ç›®å‰å¥½å¤šçš„æ–‡ç”Ÿå›¾æ¨¡å‹apiéœ€è¦ä¸€å®šçš„è´¹ç”¨ï¼Œå¦‚æœè‡ªå·±è¾“å…¥æç¤ºè¯å†ç½‘ç«™ä¸Šç”Ÿæˆï¼Œè¾“å‡ºå›¾ç‰‡ç„¶åæ‹¼æ¥å¡ç‰‡ä¹Ÿæ˜¯å¯ä»¥çš„ï¼›
è¿™é‡Œæä¾›ä¸€ç§æœ¬åœ°éƒ¨ç½²çš„stablediffusionçš„æ–¹å¼ï¼Œåç»­å¯ä»¥é€šè¿‡è„šæœ¬ç›´æ¥è¿è¡Œéƒ¨ç½²ï¼Œé€šè¿‡æ¨¡å‹è¾“å‡ºçš„promptç›´æ¥ç”Ÿæˆç›¸å…³çš„å›¾ç‰‡

é¦–å…ˆéœ€è¦ä¸‹è½½ç›¸å…³çš„stabledifusionåº“

```bash
conda activate lingua
git clone https://github.com/Stability-AI/stablediffusion.git

```

å…·ä½“çš„ä½¿ç”¨è¯´æ˜å¯ä»¥å‚è€ƒ[stablediffusion versionçš„è¯´æ˜](https://github.com/Stability-AI/stablediffusion?tab=readme-ov-file#)

å¯ä»¥é€‰æ‹©ç›´æ¥å†huggingfaceä¸Šé¢ä¸‹è½½ç›¸å…³çš„æ¨¡å‹æ–‡ä»¶ï¼Œæˆ‘æ˜¯ç›´æ¥ä¸‹è½½768-v-ema.ckptï¼ˆéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼‰ï¼Œ[huggingfaceä¸‹è½½è¿æ¥](https://huggingface.co/stabilityai/stable-diffusion-2/blob/main/768-v-ema.ckpt)ï¼›

ç¯å¢ƒå®‰è£…ä¹‹å‰åœ¨requirements.txtå·²ç»å°è£…å¥½äº†ï¼Œéœ€è¦å®‰è£…xformersåŠ å¿«æ¨¡å‹çš„æ¨ç†é€Ÿåº¦

éœ€è¦å°†ä¸‹è½½ä¹‹åçš„æ¨¡å‹æ–‡ä»¶æ”¾å…¥åˆ°stablediffusion/checkpointsæ–‡ä»¶å¤¹é‡Œé¢

åŸå§‹çš„stablediffusionä»“åº“

### 2. è¿è¡Œç¤ºä¾‹

```bash
python main.py "é›ªå±±" "å°å­¦" 60
```

è¾“å‡ºç»“æœï¼š

- `output/é›ªå±±.html` â†’ HTML å¡ç‰‡
- `output/é›ªå±±.png` â†’ å¡ç‰‡æˆªå›¾å›¾åƒ

---

## ğŸ“¸ ç¤ºä¾‹æˆªå›¾

- HTML å¡ç‰‡ç¤ºä¾‹ï¼š`output/é›ªå±±.html`
- æ’å›¾ç”±æœ¬åœ° SD æ¨¡å‹ç”Ÿæˆï¼Œé£æ ¼ç»Ÿä¸€ï¼ˆå¦‚å¡é€šã€æ²¹ç”»é£ï¼‰

---

## âš™ï¸ é…ç½®è¯´æ˜

- `image_gen/local_sd_gen.py` é»˜è®¤ä½¿ç”¨ `768-v-ema.ckpt` æƒé‡
- æœ¬åœ°æ˜¾å¡éœ€æ”¯æŒ â‰¥12G æ˜¾å­˜ï¼Œå»ºè®®å®‰è£… xformers åŠ é€Ÿæ¨¡å—
- æ¨¡æ¿é£æ ¼ `card_template.html` å¯åˆ‡æ¢æˆ–å®šåˆ¶

---

## ğŸ—‚ åˆ†æ”¯è§„åˆ’å»ºè®®

| åˆ†æ”¯åç§° | ç”¨é€”                                     |
| -------- | ---------------------------------------- |
| `main` | ä¸»çº¿ç¨³å®šç‰ˆæœ¬                             |
| `v1`   | å½“å‰ç¬¬ä¸€ä¸ªå®Œæ•´å¡ç‰‡ç”Ÿæˆç‰ˆæœ¬               |
| `v2`   | ä¸‹ä¸€é˜¶æ®µï¼šç¾åŒ–æ¨¡æ¿ / é™åˆ¶è¯æ•° / å¡ç‰‡åˆ†é¡µ |

---

## ğŸ§  åç»­ä¼˜åŒ–æ–¹å‘ï¼ˆv2è§„åˆ’ï¼‰

- é™åˆ¶æ¯ç±»å•è¯æ•°é‡ï¼Œé¿å…ä¿¡æ¯è¿‡è½½
- æ’å›¾ä¸æ¨¡æ¿é£æ ¼ç»Ÿä¸€ï¼ˆLoRA / Filterï¼‰
- å¡ç‰‡å†…å®¹åˆ†é¡µã€åŠ¨æ€å±•ç¤ºã€æ‰¹é‡ç”Ÿæˆ
- å°è£…ä¸º Web App æˆ–åˆ†äº«å›¾æ–‡é£æ ¼ï¼ˆå°çº¢ä¹¦ï¼‰

---

## ğŸ“Œ ä½œè€…å¤‡æ³¨

è¯¥é¡¹ç›®ä¸ºä¸ªäºº Agent å·¥ç¨‹å®æˆ˜ï¼Œç”¨äºæ¼”ç¤ºå¦‚ä½•ç»“åˆå¤§è¯­è¨€æ¨¡å‹ + æœ¬åœ°æ¨ç†æ¨¡å‹å®ŒæˆçŸ¥è¯†å‹å†…å®¹ç”Ÿæˆå·¥ä½œæµã€‚

æ¬¢è¿å‚è€ƒå’Œæ‰©å±•ã€‚
